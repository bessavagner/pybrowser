<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>thatscraper &mdash; thatscraper  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Example usage" href="example.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="#" class="icon icon-home"> thatscraper
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="example.html">Example usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">thatscraper</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a> &raquo;</li>
      <li>thatscraper</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="thatscraper">
<h1>thatscraper<a class="headerlink" href="#thatscraper" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="https://thatscraper.readthedocs.io/en/latest/?badge=latest"><img alt="Documentation Status" src="https://readthedocs.org/projects/thatscraper/badge/?version=latest" /></a></p>
<p>Scrap more, write less.</p>
<p><img alt="demonstration" src="thatscraper.gif" /></p>
<p><code class="docutils literal notranslate"><span class="pre">thatscraper</span></code> is a selenium adapter.</p>
<blockquote>
<div><p>Selenium automates browsers. That’s it! What you do with that power is entirely up to you.</p>
</div></blockquote>
<div style="text-align: right;">
<p>from <a href="https://www.selenium.dev/">Selenium official webpage</a></p>
</div>
<blockquote>
<div><p>Selenium is a simple API to write functional/acceptance tests using Selenium WebDriver. Through Selenium Python API you can access all functionalities of Selenium WebDriver in an intuitive way.</p>
</div></blockquote>
<div style="text-align: right;">
<p>from <a href="https://selenium-python.readthedocs.io/index.html">Selenium with python</a></p>
</div>
<p>Since there are so many websites full of javascript code, scrapping pages using static methods, as those found on Beautifulsoup, gets harder or impossible. With Selenium WebDriver you can get around with it.</p>
<p>However it is very common to make sure the desired element is expected with certain conditions. For that you have to add ‘waits’ contexts, like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support.ui</span> <span class="kn">import</span> <span class="n">WebDriverWait</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.support</span> <span class="kn">import</span> <span class="n">expected_conditions</span> <span class="k">as</span> <span class="n">EC</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Firefox</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;http://somedomain/url_that_delays_loading&quot;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># the waiting context with the selection of element by id</span>
    <span class="n">element</span> <span class="o">=</span> <span class="n">WebDriverWait</span><span class="p">(</span><span class="n">driver</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span>
        <span class="n">EC</span><span class="o">.</span><span class="n">presence_of_element_located</span><span class="p">((</span><span class="n">By</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span> <span class="s2">&quot;myDynamicElement&quot;</span><span class="p">))</span>
    <span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
<p>For a single purpose web scraping single script that means some couple of lines like that. However, for a larger testing or scraping project, that can become anoying. With using <code class="docutils literal notranslate"><span class="pre">thatscraper</span></code> above script becomes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">thatscraper</span> <span class="k">as</span> <span class="nn">ts</span>

<span class="n">crawler</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">Crawler</span><span class="p">()</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;http://somedomain/url_that_delays_loading&quot;</span><span class="p">)</span>
<span class="n">element</span> <span class="o">=</span> <span class="n">crawler</span><span class="o">.</span><span class="n">element_id</span><span class="p">(</span><span class="s2">&quot;myDynamicElement&quot;</span><span class="p">)</span>
<span class="n">crawler</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
<p>It is very important to quit the webdriver to avoid memory leakage or overcrowding. Always call <code class="docutils literal notranslate"><span class="pre">quit()</span></code> method when job is done . However, <code class="docutils literal notranslate"><span class="pre">Crawler</span></code> comes with a decorator that make sure the webdriver quits in case of any exception.</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install thatscraper
</pre></div>
</div>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">thatscraper</span></code> can be used to perform basic actions on webpages, such as clicking buttons, dropdown menu, press keyboard keys, send text or filling forms. It is also suitable to extract data.</p>
<p>Instances of <code class="docutils literal notranslate"><span class="pre">thatscraper.Crawler</span></code> are used to navigate pages, perform actions and select elements.</p>
<section id="run-the-webdriver">
<h3>Run the webdriver:<a class="headerlink" href="#run-the-webdriver" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">thatscraper</span>

<span class="n">crawler</span> <span class="o">=</span> <span class="n">thatscraper</span><span class="o">.</span><span class="n">Crawler</span><span class="p">()</span>
<span class="c1"># open page</span>
<span class="n">crawler</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://phptravels.com/demo/&quot;</span><span class="p">)</span>
<span class="c1"># wait long enough so you can check the result</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># always quit the driver</span>
<span class="n">crawler</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
<p>Alternatively, you can crawl pages withou opening browser graphics:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">crawler</span> <span class="o">=</span> <span class="n">thatscraper</span><span class="o">.</span><span class="n">Crawler</span><span class="p">(</span><span class="n">headless</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

</pre></div>
</div>
</section>
<section id="choosing-the-webdriver">
<h3>Choosing the webdriver<a class="headerlink" href="#choosing-the-webdriver" title="Permalink to this heading"></a></h3>
<p>By default <code class="docutils literal notranslate"><span class="pre">thatscraper</span></code> make use of FireFox webdriver (<a class="reference external" href="https://github.com/mozilla/geckodriver/releases">geckodriver</a>), however other drivers can be selected. But make sure you have the one of your choosing, and its <a class="reference external" href="https://selenium-python.readthedocs.io/installation.html#drivers">path is added to your enviroment variables</a>. For Linux users, download the werdriver and put it in /usr/bin or /usr/local/bin (windows user, <a class="reference external" href="https://stackoverflow.com/a/56926716/13599189">check this out</a> in order to see how to do that in your system).</p>
<p>Here’s a list of suported browser drivers:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Browser</strong></p></th>
<th class="head"><p><strong>Download link</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Chrome</strong></p></td>
<td><p>https://sites.google.com/chromium.org/driver/</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Edge</strong></p></td>
<td><p>https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/</p></td>
</tr>
<tr class="row-even"><td><p><strong>FireFox</strong></p></td>
<td><p>https://github.com/mozilla/geckodriver/releases</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Safari</strong></p></td>
<td><p>https://webkit.org/blog/6900/webdriver-support-in-safari-10/</p></td>
</tr>
</tbody>
</table>
<p>To use other driver, pass it’s browser name to <code class="docutils literal notranslate"><span class="pre">Crawler</span></code> class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">thatscraper</span> <span class="k">as</span> <span class="nn">ts</span>

<span class="n">crawler</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">Crawler</span><span class="p">(</span><span class="n">browser</span><span class="o">=</span><span class="s1">&#39;chrome&#39;</span><span class="p">)</span>

<span class="c1"># extract data from</span>
<span class="n">crawler</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="s2">&quot;https://www.techlistic.com/p/demo-selenium-practice.html&quot;</span><span class="p">)</span>
<span class="c1"># wait long enough so you can check the result</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># always quit the driver</span>
<span class="n">crawler</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="elements-their-children">
<h3>Elements their children<a class="headerlink" href="#elements-their-children" title="Permalink to this heading"></a></h3>
<p>Elements can be selected with one of four methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">element(value,</span> <span class="pre">by)</span></code>: selects an element based on given attribute <code class="docutils literal notranslate"><span class="pre">by</span></code>, with value <code class="docutils literal notranslate"><span class="pre">value</span></code>. A list of attributes is given by <code class="docutils literal notranslate"><span class="pre">thatscraper.ATTR_SELECTOR.keys()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">elements(value,</span> <span class="pre">by)</span></code>: selects all elements based on given attribute <code class="docutils literal notranslate"><span class="pre">by</span></code>, with value <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">child_of(element,</span> <span class="pre">value,</span> <span class="pre">by)</span></code>: selects an element child of <code class="docutils literal notranslate"><span class="pre">element</span></code> (WebElement) based on given attribute <code class="docutils literal notranslate"><span class="pre">by</span></code>, with value <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">children_of</span></code>: selects all elements child of <code class="docutils literal notranslate"><span class="pre">element</span></code> based on given attribute <code class="docutils literal notranslate"><span class="pre">by</span></code>, with value <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p></li>
</ul>
<p>Consider the following section of a page:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;form&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;first_name&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;first_name input mb1&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;First Name&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;last_name&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;last_name input mb1&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Last Name&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;business_name&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;business_name input mb1&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;Business Name&quot;</span><span class="p">&gt;</span>
    ...
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>In order to make sure you select the input tags from that div with class=”from”, and not another input that the page may contain, first you can select that div, and then select its children:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">form_element</span> <span class="o">=</span> <span class="n">crawler</span><span class="o">.</span><span class="n">element</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">,</span> <span class="s2">&quot;class name&quot;</span><span class="p">)</span>
<span class="n">fields</span> <span class="o">=</span> <span class="n">crawler</span><span class="o">.</span><span class="n">children_of</span><span class="p">(</span><span class="n">form_element</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="s2">&quot;tag name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="sending-keys">
<h3>Sending keys<a class="headerlink" href="#sending-keys" title="Permalink to this heading"></a></h3>
<p>Sending inputs or keys to and element is performed one of two methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">send(key,</span> <span class="pre">value,</span> <span class="pre">by)</span></code>: send <code class="docutils literal notranslate"><span class="pre">key</span></code> to an element based on given attribute <code class="docutils literal notranslate"><span class="pre">by</span></code>, with value <code class="docutils literal notranslate"><span class="pre">value</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">send(key,</span> <span class="pre">element)</span></code>: send <code class="docutils literal notranslate"><span class="pre">key</span></code> to previously selected <code class="docutils literal notranslate"><span class="pre">element</span></code>.</p></li>
</ul>
<p>Consider the same abov section of a page, and the selected elements <code class="docutils literal notranslate"><span class="pre">field</span></code>. Sending a string to element <code class="docutils literal notranslate"><span class="pre">&lt;input</span> <span class="pre">type=&quot;text&quot;</span> <span class="pre">name=&quot;first_name&quot;</span> <span class="pre">class=&quot;first_name</span> <span class="pre">input</span> <span class="pre">mb1&quot;</span> <span class="pre">placeholder=&quot;First</span> <span class="pre">Name&quot;&gt;</span></code> can be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">crawler</span><span class="o">.</span><span class="n">send_to_element</span><span class="p">(</span><span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;Vagner Bessa&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Sending keyboard keys works the same way. Check <code class="docutils literal notranslate"><span class="pre">thatscraper.Key</span></code> or <code class="docutils literal notranslate"><span class="pre">selenium.webdriver.common.keys.Keys</span></code> for valid keys.</p>
</section>
</section>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this heading"></a></h2>
<p>Interested in contributing? Check out the contributing guidelines. Please note that this project is released with a Code of Conduct. By contributing to this project, you agree to abide by its terms.</p>
</section>
<section id="todos">
<h2>TODOs<a class="headerlink" href="#todos" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>[ ] Test all methods (current coverage: 67%).</p></li>
<li><p>[ ] Implement data extraction modules and classes.</p></li>
<li><p>[ ] Link or adapt to a database handler.</p></li>
<li><p>[ ] Implement an API boilerplate builder. That API is to serve data extracted from extractor modules and classes.</p></li>
</ul>
</section>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">thatscraper</span></code> was created by Vagner Bessa. It is licensed under the terms of the MIT license.</p>
</section>
<section id="credits">
<h2>Credits<a class="headerlink" href="#credits" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">thatscraper</span></code> was created with <a class="reference external" href="https://cookiecutter.readthedocs.io/en/latest/"><code class="docutils literal notranslate"><span class="pre">cookiecutter</span></code></a> and the <code class="docutils literal notranslate"><span class="pre">py-pkgs-cookiecutter</span></code> <a class="reference external" href="https://github.com/py-pkgs/py-pkgs-cookiecutter">template</a>.</p>
<div class="toctree-wrapper compound">
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="example.html" class="btn btn-neutral float-right" title="Example usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Vagner Bessa.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>